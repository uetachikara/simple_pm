<h1>Dashboard</h1>

<p>
  <%= link_to "Users", users_path %> |
  <%= link_to "Projects", projects_path %> |
  <%= link_to "Tasks", tasks_path %>
</p>

<hr>

<h2>Users</h2>
<ul>
  <% @users.each do |u| %>
    <li><%= link_to u.name, u %></li>
  <% end %>
</ul>
<p><%= link_to "New user", new_user_path %></p>

<hr>

<h2>Recent Projects</h2>
<table>
  <thead>
    <tr>
      <th>Project</th>
      <th>User</th>
      <th>Created</th>
    </tr>
  </thead>
  <tbody>
    <% @recent_projects.each do |p| %>
      <tr>
        <td><%= link_to p.name, p %></td>
        <td><%= link_to p.user.name, p.user %></td>
        <td><%= p.created_at.to_date %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<p><%= link_to "New project", new_project_path %></p>

<hr>

<h2>Tasks due within 7 days (not done)</h2>
<% if @upcoming_tasks.any? %>
  <table>
    <thead>
      <tr>
        <th>Task</th>
        <th>Status</th>
        <th>Due</th>
        <th>Project</th>
        <th>User</th>
      </tr>
    </thead>
    <tbody>
      <% @upcoming_tasks.each do |t| %>
        <tr>
          <td><%= link_to t.title, t %></td>
          <td><%= t.status %></td>
          <td><%= t.due_date %></td>
          <td><%= link_to t.project.name, t.project %></td>
          <td><%= link_to t.project.user.name, t.project.user %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>該当なし</p>
<% end %>

<hr>

<h2>Tasks without due date (not done)</h2>
<% if @no_due_tasks.any? %>
  <table>
    <thead>
      <tr>
        <th>Task</th>
        <th>Status</th>
        <th>Project</th>
        <th>User</th>
      </tr>
    </thead>
    <tbody>
      <% @no_due_tasks.each do |t| %>
        <tr>
          <td><%= link_to t.title, t %></td>
          <td><%= t.status %></td>
          <td><%= link_to t.project.name, t.project %></td>
          <td><%= link_to t.project.user.name, t.project.user %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>該当なし</p>
<% end %>

<p><%= link_to "New task", new_task_path %></p>
